<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>New Schedule</title>

    <%- include('../partials/linkCss') %>
    <script type="text/javascript">
      document.addEventListener("DOMContentLoaded", function () {
        const elems = document.querySelectorAll("select");
        const options = { classes: "" };
        const instances = M.FormSelect.init(elems, options);
      });
    </script>
  </head>
  <body>
    <nav>
      <div class="nav-wrapper blue lighten-1">
        <a href="#" class="Mrlogo left"> </a>
        <a href="#" class="brand-logo center">Schedule App</a>
        <!-- <a href="#" data-activates="mobile-demo" class="button-collapse"
          ><i class="material-icons">menu</i></a
        > -->
        <!-- hide-on-med-and-down -->
        <ul class="right hide-on-med-and-down" id="nav-mobile">
          <li><a href="/home/all">Home</a></li>
          <li><a href="/logout">Logout</a></li>
        </ul>
        <!-- <ul class="side-nav" id="mobile-demo">
          <li><a href="#">Home</a></li>
          <li><a href="/users/login">Login</a></li>
          <li><a href="/">Register</a></li>
        </ul> -->
      </div>
    </nav>
    <main>
      <div class="row" style="margin: 2em">
        <div class="col s4"></div>
        <div class="col s4">
          <table>
            <thead>
              <tr>
                <th>User</th>
                <th>Day</th>
                <th>Start at</th>
                <th>End at</th>
                <th>Delete</th>
              </tr>
            </thead>
            <tbody>
              <% for (let i = 0; i < schedules.length; i++) { %>
              <tr>
                <td><%= schedules[i].username %></td>
                <td><%= schedules[i].day %></td>
                <td><%= schedules[i].start_time %></td>
                <td><%= schedules[i].end_time %></td>
                <td>
                  <a
                    href="delete/<%=schedules[i].sid %>"
                    class="delete"
                    method="post"
                    onclick="return confirm('Are you sure you want to delete this schedule?');"
                    ><i class="material-icons">delete</i></a
                  >
                </td>
              </tr>
              <% } %>
            </tbody>
          </table>
        </div>
      </div>
      <div class="row" style="margin: 2em">
        <div class="col s4"></div>
        <form method="POST" action="/schedules" class="col s4">
          <div class="input-field col s12">
            <select id="selectDay" name="selectDay">
              <option value="1">Monday</option>
              <option value="2">Tuesday</option>
              <option value="3">Wednesday</option>
              <option value="4">Thursday</option>
              <option value="5">Friday</option>
              <option value="6">Saturday</option>
              <option value="7">Sunday</option>
            </select>
            <label for="selectDay">Select Day</label>
          </div>

          <div>
            <label for="start_time">Start at</label>
            <input id="start_time" type="time" name="start_time" required />
          </div>

          <div>
            <label for="end_time">End at</label>
            <input id="end_time" type="time" name="end_time" required />
          </div>

          <button class="btn waves-effect light-blue" type="submit">
            Add new schedule
          </button>
        </form>
      </div>
    </main>

    <!-- include footer -->
    <%- include('../partials/footer') %>
    <!-- end of the body include js  -->

    <!-- <script
      type="text/javascript"
      language="JavaScript"
      src="/materialize.min.js"
    ></script> -->
    <%- include('../partials/linkJS') %>
  </body>
</html>
